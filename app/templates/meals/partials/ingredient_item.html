<div class="ingredient-item" id="ingredient-{{ meal_ingredient.id }}">
    <div class="grid">
        <div>
            <strong
                id="ingredient-name-{{ meal_ingredient.id }}"
                onclick="makeEditable(this, {{ meal_ingredient.meal_id }}, {{ meal_ingredient.id }}, 'ingredient_name')"
                style="cursor: text; display: inline-block; padding: 0.1rem 0.3rem; border-radius: 3px;"
                title="Click to edit ingredient name"
            >
                {{ meal_ingredient.ingredient.name }}
            </strong>
            {% if meal_ingredient.source == 'ai' %}
            <span style="
                font-size: 10px;
                color: var(--color-text-secondary);
                background: rgba(255, 255, 255, 0.03);
                padding: 2px 6px;
                border-radius: var(--radius-sm);
                margin-left: var(--space-2);
                font-weight: var(--font-medium);
                text-transform: uppercase;
                letter-spacing: 0.5px;
            " title="Suggested by AI">AI</span>
            {% elif meal_ingredient.source == 'user-edit' %}
            <span style="
                font-size: 10px;
                color: #6BA4C8;
                background: rgba(69, 123, 157, 0.1);
                border: 1px solid rgba(69, 123, 157, 0.3);
                padding: 2px 6px;
                border-radius: var(--radius-sm);
                margin-left: var(--space-2);
                font-weight: var(--font-medium);
                text-transform: uppercase;
                letter-spacing: 0.5px;
            " title="AI suggestion edited by you">Edited</span>
            {% endif %}
            {# No badge for 'user-add' - manual entries #}

            <div style="display: flex; gap: var(--space-3); align-items: center; margin-top: var(--space-2);">
                <!-- State Dropdown -->
                <div>
                    <select
                        id="state-{{ meal_ingredient.id }}"
                        onchange="updateIngredientState({{ meal_ingredient.id }}, this.value)"
                        style="
                            font-size: var(--text-xs);
                            padding: 4px 8px;
                            border-radius: var(--radius-sm);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            background: var(--color-bg-secondary);
                            color: var(--color-text-primary);
                            cursor: pointer;
                        "
                    >
                        <option value="raw" {% if meal_ingredient.state.value == 'raw' %}selected{% endif %}>Raw</option>
                        <option value="cooked" {% if meal_ingredient.state.value == 'cooked' %}selected{% endif %}>Cooked</option>
                        <option value="processed" {% if meal_ingredient.state.value == 'processed' %}selected{% endif %}>Processed</option>
                    </select>
                </div>

                <span style="color: var(--color-text-secondary);">•</span>

                <!-- Quantity (editable text) -->
                <div style="flex: 1;">
                    <span
                        id="quantity-{{ meal_ingredient.id }}"
                        onclick="makeEditable(this, {{ meal_ingredient.meal_id }}, {{ meal_ingredient.id }}, 'quantity')"
                        style="
                            cursor: text;
                            color: {% if meal_ingredient.quantity_description %}var(--color-text-primary){% else %}var(--color-text-secondary){% endif %};
                            font-style: {% if not meal_ingredient.quantity_description %}italic{% else %}normal{% endif %};
                            font-size: var(--text-sm);
                        "
                        title="Click to edit quantity"
                    >
                        {{ meal_ingredient.quantity_description or 'Add quantity' }}
                    </span>
                </div>
            </div>
        </div>
        <div style="text-align: right;">
            <button
                hx-delete="/meals/{{ meal_ingredient.meal_id }}/ingredients/{{ meal_ingredient.id }}"
                hx-target="#ingredient-{{ meal_ingredient.id }}"
                hx-swap="outerHTML swap:0.2s"
                class="secondary"
                style="padding: 0.3rem 0.6rem; font-size: 0.9rem;"
                title="Remove ingredient"
            >
                ✕
            </button>
        </div>
    </div>
</div>
